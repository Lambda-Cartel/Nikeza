// Generated by BUCKLESCRIPT VERSION 1.8.1, PLEASE EDIT WITH CARE
'use strict';

var $$Array    = require("bs-platform/lib/js/array.js");
var Axios      = require("axios");
var Pervasives = require("bs-platform/lib/js/pervasives.js");

function tagEndpoint(page) {
  return "https://api.stackexchange.com/2.2/tags?page=" + (Pervasives.string_of_int(page) + "&pagesize=100&order=desc&sort=popular&site=stackoverflow");
}

function tagsRequest(page) {
  return Axios.get(tagEndpoint(page)).then((function (resp) {
                  return resp.data;
                })).then((function (data) {
                return Promise.resolve(/* record */[
                            /* items */data.items,
                            /* has_more */data.has_more,
                            /* quota_max */data.quota_max,
                            /* quota_remaining */data.quota_remaining
                          ]);
              }));
}

function getAllTag(hasMore, page, acc) {
  if (hasMore) {
    return tagsRequest(page).then((function (resp) {
                  console.log(resp);
                  return getAllTag(resp[/* has_more */1], page + 1 | 0, $$Array.append(acc, resp[/* items */0]));
                }));
  } else {
    return Promise.resolve(acc);
  }
}

getAllTag(/* true */1, 1, /* array */[]);

exports.tagEndpoint = tagEndpoint;
exports.tagsRequest = tagsRequest;
exports.getAllTag   = getAllTag;
/*  Not a pure module */
